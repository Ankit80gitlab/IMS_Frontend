<page-header class="bg-green-600"></page-header>

<form [formGroup]="customerUserForm" #formGroupDirective="ngForm" class="form-field-full">
    @if(isUserAdmin){
    <div class="row">
        <div class="col-md-8"></div>
        <div class="col-md-4">
            <mat-form-field class="m-r-8" appearance="outline">
                <mat-label>SELECT CUSTOMER</mat-label>
                <mtx-select [clearable]="false" [items]="customer$ | async" bindLabel="name" bindValue="id"
                    [virtualScroll]="true" (scrollToEnd)="onScrollCustomerEnd()" (search)="onCustomerSearch($event)"
                    [loading]="customerLoading" [searchable]="true" formControlName="id"
                    (change)="onCustomerSelectionChange($event)">
                </mtx-select>
            </mat-form-field>
        </div>
    </div>
    }
</form>

<div class="row">
    @for (stat of stats; track stat) {
    <div class="col-sm-6 col-md-2">
        <mat-card [ngClass]="['text-white', stat.color]">
            <mat-card-header>
                <mat-card-subtitle class="text-white">{{stat.title}}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <h2 class="m-y-8">{{stat.amount}}</h2>
                <mtx-progress [value]="stat.progress.value" height="2px" foreground="rgba(255,255,255,1)"
                    background='rgba(0,0,0,.5)'>
                </mtx-progress>
                <small class="text-mute">COUNT</small>
            </mat-card-content>
        </mat-card>
    </div>
    }
</div>

<br>

<div class="row">
    <div class="col-sm-6">
        <div class="card">
            <div id="pie" style="width: 500px;height:400px;"></div>
        </div>
    </div>
    <div class="col-sm-6">
        <div class="card">
            <div id="priorityPie" style="width: 500px;height:400px;"></div>
        </div>
    </div>
</div>

<br>

<div class="row">
    <div class="col-sm-12">
        <div class="card">
            <div id="graph" style="width:800px;height:400px;"></div>
        </div>
    </div>
</div>