<page-header class="bg-green-600"></page-header>
<div class="row">

    <div class="col-md-4">
        <mat-card>
            <mat-card-header>
                <mat-card-title>Change Password</mat-card-title>
            </mat-card-header>

            <hr>

            <mat-card-content>
                <form [formGroup]="passwordResetFrom" #formGroupDirective="ngForm" class="form-field-full">

                    <mat-form-field class="m-r-8" appearance="outline">
                        <mat-label>Current Password</mat-label>
                        <input type="password" matInput placeholder="Current Password" formControlName="currentPassword"
                            required>
                        @if (passwordResetFrom.get('password').invalid && passwordResetFrom.get('password').touched) {
                        <mat-error>This field is required</mat-error>
                        }
                    </mat-form-field>

                    <mat-form-field class="m-r-8" appearance="outline">
                        <mat-label>New Password</mat-label>
                        <input type="password" matInput placeholder="New Password" formControlName="password" required>
                        @if (passwordResetFrom.get('password').invalid && passwordResetFrom.get('password').touched &&
                        passwordResetFrom.get('password').errors.required) {
                        <mat-error>This field is required</mat-error>
                        }
                        @if (passwordResetFrom.get('password').invalid && passwordResetFrom.get('password').touched &&
                        passwordResetFrom.get('password').errors.minlength) {
                        <mat-error>Password must be at least 6 characters long</mat-error>
                        }
                    </mat-form-field>

                    <mat-form-field class="m-r-8" appearance="outline">
                        <mat-label>Confirm Password</mat-label>
                        <input type="password" matInput placeholder="Confirm Password" formControlName="confirmPassword"
                            required>
                        @if (passwordResetFrom.get('confirmPassword').invalid &&
                        passwordResetFrom.get('confirmPassword').touched &&
                        passwordResetFrom.get('confirmPassword').errors.required) {
                        <mat-error>This field is required</mat-error>
                        }
                        @if (passwordResetFrom.get('confirmPassword').invalid &&
                        passwordResetFrom.get('confirmPassword').touched &&
                        passwordResetFrom.get('confirmPassword').errors.passwordMismatch) {
                        <mat-error>Passwords does not match</mat-error>
                        }
                    </mat-form-field>

                </form>

                <div class="m-t-8 d-flex justify-content-end">
                    <button mat-raised-button class="m-x-8" color="custom-green" [disabled]="!passwordResetFrom.valid"
                        (click)="onSubmit(formGroupDirective)">Change Password</button>
                </div>

            </mat-card-content>

        </mat-card>
    </div>
</div>